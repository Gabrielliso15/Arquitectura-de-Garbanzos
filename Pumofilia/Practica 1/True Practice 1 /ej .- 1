; Memoria de datos
ORG 1000H
MENSAJE DB "Agua marfil", 0    ; El string que vamos a contar, terminado en 0
contador DW 0                    ; Variable para almacenar el contador
CARACTERA DB "a"                 ; La letra que queremos contar

; Memoria de instrucciones
ORG 2000H

    MOV AX, OFFSET MENSAJE       ; Cargar la dirección del string en AX
    MOV BX, AX                   ; Copiar la dirección del string en BX
    MOV CX, 0                    ; Inicializar el contador en CX
    MOV DL, CARACTERA          ; Cargar la letra "a" en DL
    
CUENTA_LAZO:
    MOV AL, [BX]                 ; Cargar el byte actual del string en AL
    CMP AL, 0                    ; Comparar con 0 (fin del string)
    JZ FIN                       ; Si es 0, saltar al final
    CMP AL, DL                   ; Comparar el carácter actual con "a"
    JNZ SIGUIENTE                ; Si no es "a", saltar a la siguiente iteración
    INC CX                       ; Si es "a", incrementar el contador
    INC BX                       ; pasa al otro caracter
    JMP CUENTA_LAZO

SIGUIENTE:
    INC BX                       ; Moverse al siguiente carácter
    JMP CUENTA_LAZO              ; Repetir el ciclo

FIN:
    MOV contador, CX           ; Guardar el valor del contador

    ; Terminar el programa
    HLT                          ; Detener la ejecución
    RET

END

